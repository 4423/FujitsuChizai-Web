<table class="table">
    <tr>
        <th>出発地</th>
        <th>案内回数</th>
    </tr>

    @foreach (var item in Model.Data.Origin)
            {
        <tr>
            <td>
                @Html.ActionLink(item.PlaceMark.Name, "Details", "Map", new { id = item.PlaceMark.Id }, null)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Count)
            </td>
        </tr>
    }
</table>

<div class="map">
    <div id="canvas">
        @{ var selectedMap = Model.Maps.Single(x => x.Id == Model.MapId); }
        <img src="~/Resources/Map/@selectedMap.MapImageFilePath">
        <div id="svg_layer">
            <svg width="100%" height="100%" viewBox="0 0 @selectedMap.Width @selectedMap.Height">
                @{ var maximum = Model.Data.Origin.Max(x => x.Count); }
                @foreach (var item in Model.Data.Origin)
                {
                    int r = item.Count / maximum * 40;
                    <circle cx="@Html.DisplayFor(modelItem => item.PlaceMark.X)"
                            cy="@Html.DisplayFor(modelItem => item.PlaceMark.Y)"
                            r="@Html.DisplayFor(modelItem => r)"
                            fill="orange" />
                }
            </svg>
        </div>
    </div>
</div>